import{T as g}from"./TemplateSetup-CeXXKPFY.js";import{_ as f,c as w,w as a,r as i,o as r,e as u,v as d,b as o,g as c,h as v,F as b,a as p,d as m,t as y}from"./index-D4VooVI-.js";import"./UtilityNavbar-BgNQRm0G.js";import"./TemplateDefault-vNknsRHy.js";const k={components:{TemplateSetup:g},inject:["io","server","user","userUpdate"],data:()=>({email:"",password:"",providers:[]}),async created(){await this.getLoginProviders()},async mounted(){var t,e;(e=(t=this.$refs)==null?void 0:t.username)==null||e.focus()},methods:{async redirect(t){const e=this.server.endsWith("/")?`oauth/${t}?app_url=${location.href}`:`/oauth/${t}?app_url=${location.href}`;location.href=this.server+e},async getLoginProviders(){try{await this.io.logout(),this.providers=await this.io.service("oauth_login").find()}catch(t){console.log("error",t)}},async login(t){this.io.authenticate({strategy:"local",...t}).then(e=>{this.userUpdate(e==null?void 0:e.user),this.$router.push("/dashboard")}).catch(e=>{console.error("Authentication error",e),alert(e.message)})}}},_=o("h2",{class:"mb-2"}," JSTune ",-1),$=["onClick"];function x(t,e,T,L,S,n){const l=i("router-link"),h=i("TemplateSetup");return r(),w(h,null,{default:a(()=>[_,u(o("input",{ref:"username","onUpdate:modelValue":e[0]||(e[0]=s=>t.email=s),class:"mb-3 font-extralight text-slate-800 py-2.5 px-2 rounded-md w-full",placeholder:"Username"},null,512),[[d,t.email]]),u(o("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>t.password=s),class:"font-extralight text-slate-800 py-2.5 px-2 rounded-md w-full",placeholder:"Password",type:"password"},null,512),[[d,t.password]]),o("button",{onClick:e[2]||(e[2]=s=>n.login({email:t.email,password:t.password})),class:"hover:bg-fuchsia-950 mt-4 mb-2 rounded-lg bg-fuchsia-900 w-full p-3"}," Login "),(r(!0),c(b,null,v(t.providers,s=>(r(),c("button",{onClick:C=>n.redirect(s),class:"hover:bg-sky-800 bg-sky-700 mt-2 rounded-lg w-full p-3"}," Login with "+y(s),9,$))),256)),p(l,{to:"/recover",class:"hover:text-slate-200 mt-6 inline-block text-center w-full"},{default:a(()=>[m(" Recover lost password ")]),_:1}),p(l,{to:"/register",class:"mt-3 hover:text-slate-200 inline-block text-center w-full"},{default:a(()=>[m(" Request access ")]),_:1})]),_:1})}const P=f(k,[["render",x]]);export{P as default};
