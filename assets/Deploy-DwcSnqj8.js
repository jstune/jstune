import{W as z}from"./UtilityNavbar-CcHIKHDD.js";import E from"./TemplateDefault-DEzEABdG.js";import{S as L}from"./SectionHero-DAG2e5vI.js";import{T as W,u as M,a as H}from"./unzipit.module-CwSX96M0.js";import{_ as K,c as Z,w as y,r as k,o as n,a as B,b as s,t as g,g as a,k as b,e as d,v as p,d as m,h as f,F as w,f as _,j as Y,p as x,l as G}from"./index-CyRbk2fV.js";const J={components:{WrapperPage:z,TemplateDefault:E,SectionHero:L},props:["renderer"],inject:["io"],data:()=>({dockerComposeFile:"",files:[],name:"",slug:"",repository:"",branch:"",branches:[],adjustVolumes:!0,inherit:!0,running:!1,webhook:!1,searchRepos:!1,oauthProviders:[],consentUrl:"",search:"",user:null,query:"",organisations:[],repositories:null,log:null,loading:"",serviceOpen:null,services:[]}),watch:{async searchRepos(t){t&&(await this.getOAuthProviders(),await this.getUser(),await this.getOrganisations(),!this.query&&this.orgs.length&&(this.query=this.orgs[0].query,await this.getRepositories()))},async query(){await this.getRepositories()},async repository(t){var u;const e=(u=this.repositories)==null?void 0:u.items.find(h=>h.clone_url===t);e&&(this.branch=e.default_branch,await this.getBranches(e),await this.getDockerCompose(e))},async branch(t){var u;const e=(u=this.repositories)==null?void 0:u.items.find(h=>h.clone_url===this.repository);e&&await this.getDockerCompose(e)}},computed:{id(){return this.$route.params.id||this.slug||"ignite-users"},oauthProvidersFiltered(){const t=["github"];return this.oauthProviders.filter(e=>t.includes(e.provider))},orgs(){var t,e;return[{title:(t=this.user)==null?void 0:t.login,query:`user:${(e=this.user)==null?void 0:e.login}`},...this.organisations.map(u=>{var h,v;return{title:(h=u==null?void 0:u.organization)==null?void 0:h.login,query:`org:${(v=u==null?void 0:u.organization)==null?void 0:v.login}`}})]}},async created(){await this.getOAuthProviders(),this.id&&await this.getItem()},methods:{async getServices(){console.log("Syncing docker with database..."),await this.io.service("docker_nodes").get("sync"),console.log("Fetching services...");const t=(await this.io.service("docker_services").find({query:{stackname:this.slug,$limit:1e3}})).data;console.log("Fetching service resources...",t);for(const e of t)console.log("Resolve",e.name),console.log("Fetching environments"),e.environments=(await this.io.service("docker_services_environments").find({query:{docker_service_id:e.docker_service_id,$limit:1e3}})).data,console.log("Fetching networks"),e.networks=(await this.io.service("docker_services_networks").find({query:{docker_service_id:e.docker_service_id,$limit:1e3}})).data,console.log("Fetching ports"),e.ports=(await this.io.service("docker_services_ports").find({query:{docker_service_id:e.docker_service_id,$limit:1e3}})).data,console.log("Fetching volumes"),e.volumes=(await this.io.service("docker_services_volumes").find({query:{docker_service_id:e.docker_service_id,$limit:1e3}})).data,console.log("Fetching tasks"),e.tasks=(await this.io.service("docker_tasks").find({query:{docker_service_id:e.docker_service_id,$limit:1e3}})).data,console.log("Fetching containers"),e.containers=(await this.io.service("docker_containers").find({query:{docker_service_id:e.docker_service_id,$limit:1e3}})).data,console.log("Done",e.name);console.log("Completed",t),this.services=t},async getDockerCompose(t){this.loading="docker compose file";const e=this.oauthProvidersFiltered.find(u=>u.provider==="github");if(e)try{const h=await(await fetch(t.contents_url.replace("{+path}","docker-compose.yml")+`?ref=${this.branch}`,{headers:{Accept:"application/vnd.github+json",Authorization:`Bearer ${e.token}`}})).json();h.download_url&&(this.dockerComposeFile=await(await fetch(h.download_url)).text())}catch{console.error("Could not fetch docker-compose.yml",error)}this.loading=""},async getUser(){this.loading="user";const t=this.oauthProvidersFiltered.find(e=>e.provider==="github");if(t){let e=await fetch("https://api.github.com/user",{headers:{Accept:"application/vnd.github+json",Authorization:`Bearer ${t.token}`}});this.user=await e.json(),console.log("user",this.user)}this.loading=""},async getOrganisations(){this.loading="organisations";const t=this.oauthProvidersFiltered.find(e=>e.provider==="github");if(t){let e=await fetch("https://api.github.com/user/memberships/orgs?per_page=150",{headers:{Accept:"application/vnd.github+json",Authorization:`Bearer ${t.token}`}});this.organisations=await e.json(),console.log("orgs",this.organisations)}this.loading=""},async getRepositories(){this.loading="repositories";const t=this.oauthProvidersFiltered.find(e=>e.provider==="github");if(t){let e="q="+encodeURIComponent(this.search+(" "+this.query||" user:"+this.user.login)),u=await fetch(`https://api.github.com/search/repositories?${e}&per_page=150`,{headers:{Accept:"application/vnd.github+json",Authorization:`Bearer ${t.token}`}});this.repositories=await u.json(),console.log("repos",this.repositories)}this.loading=""},async getBranches(t){this.loading="branches";const e=this.oauthProvidersFiltered.find(u=>u.provider==="github");if(e){let u=await fetch(t.branches_url.replace("{/branch}","")+"?per_page=150",{headers:{Accept:"application/vnd.github+json",Authorization:`Bearer ${e.token}`}});this.branches=await u.json(),console.log("branches",this.branches)}this.loading=""},consent(t){t&&window.open(t,"_blank")},async getOAuthProviders(){this.loading="providers";const t=await this.io.service("oauth_providers").find({query:{}});this.oauthProviders=t==null?void 0:t.data,this.loading=""},async getItem(){this.loading="app";const t=await this.io.service("apps").get(this.id);this.name=t.name,this.slug=t.id,this.repository=t.repository,this.branch=t.branch,this.adjustVolumes=t.adjustVolumes,this.inherit=t.inherit,this.running=t.running,this.dockerComposeFile=t.dockerComposeFile,this.webhook=t.webhook,this.log=t.log,console.log(t),await this.getServices(),this.loading=""},async remove(){this.loading="remove app";try{const t=await this.io.service("apps").remove(this.id);console.log("res",t),this.$router.push("/apps")}catch(t){console.log("err",t)}this.loading=""},async attach(){this.loading="attach webhook";try{const t=await this.io.service("apps").patch(this.id,{attach:!0});console.log("res",t)}catch(t){console.log("err",t)}await this.getItem(),this.loading=""},async detach(){this.loading="detach webhook";try{const t=await this.io.service("apps").patch(this.id,{detach:!0});console.log("res",t)}catch(t){console.log("err",t)}await this.getItem(),this.loading=""},async start(){this.loading="start app";try{const t=await this.io.service("apps").patch(this.id,{start:!0});console.log("res",t)}catch(t){console.log("err",t)}await this.getItem(),this.loading=""},async stop(){this.loading="stop app";try{const t=await this.io.service("apps").patch(this.id,{stop:!0});console.log("res",t)}catch(t){console.log("err",t)}await this.getItem(),this.loading=""},async build(){this.loading="build app";try{const t=await this.io.service("apps").patch(this.id,{build:!0});console.log("res",t)}catch(t){console.log("err",t)}await this.getItem(),this.loading=""},async destroy(){this.loading="destroy app";try{const t=await this.io.service("apps").patch(this.id,{destroy:!0});console.log("res",t)}catch(t){console.log("err",t)}await this.getItem(),this.loading=""},async compose(){this.loading="compose app";const t=await this.io.service("apps").patch(this.id,{compose:this.dockerComposeFile});console.log("res",t),await this.getItem(),this.loading=""},async deploy(){var t;this.loading="deploy app";try{console.log("files",this.files);const e=await this.io.service("apps").create({name:this.name,slug:this.id,buffer:(t=this.files)!=null&&t.length?await this.packTar():null,repository:this.repository,branch:this.branch,dockerComposeFile:this.dockerComposeFile,adjustVolumes:this.adjustVolumes,inherit:this.inherit});console.log("res",e)}catch(e){console.log("error",e)}await this.getItem(),this.loading=""},async update(){var t;this.loading="update app";try{const e=await this.io.service("apps").update(this.id,{buffer:(t=this.files)!=null&&t.length?await this.packTar():null,repository:this.repository,dockerComposeFile:this.dockerComposeFile,inherit:this.inherit,adjustVolumes:this.adjustVolumes,branch:this.branch,name:this.name});console.log("res",e)}catch(e){console.log("error",e)}await this.getItem(),this.loading=""},async resolveDockerCompose(){this.loading="docker compose file";const t=this.files.find(e=>e.name.endsWith("docker-compose.yml"));if(t){const e=new TextDecoder().decode(t.buffer);this.dockerComposeFile=e}this.loading=""},async packTar(){let t=new W;for await(let e of this.files)t.append(e.name,new Uint8Array(e.buffer));return t.out},async uploadZip(){return this.files=[],this.dockerComposeFile="",new Promise(t=>{let e=document.createElement("input");e.type="file",e.multiple=!1,e.accept=".zip",e.onchange=async()=>{let u=Array.from(e.files)[0];const{entries:h}=await M(await u.arrayBuffer());for await(const[v,r]of Object.entries(h))h[v].isDirectory||this.files.push({buffer:await r.arrayBuffer(),name:v});await this.resolveDockerCompose(),t()},e.click()})},async uploadTar(){return this.files=[],this.dockerComposeFile="",new Promise(t=>{let e=document.createElement("input");e.type="file",e.multiple=!1,e.accept=".tar",e.onchange=async()=>{let u=Array.from(e.files)[0],h=await H(await u.arrayBuffer());for await(let v of h)this.files.push({buffer:v.buffer,name:v.name});await this.resolveDockerCompose(),t()},e.click()})},async uploadFolder(){return this.files=[],this.dockerComposeFile="",new Promise(t=>{let e=document.createElement("input");e.type="file",e.multiple=!0,e.webkitdirectory=!0,e.dir=!0,e.onchange=async()=>{let u=Array.from(e.files);for await(let h of u)this.files.push({buffer:await h.arrayBuffer(),name:h.webkitRelativePath});await this.resolveDockerCompose(),t()},e.click()})},async uploadFiles(){return this.files=[],this.dockerComposeFile="",new Promise(t=>{let e=document.createElement("input");e.type="file",e.multiple=!0,e.onchange=async()=>{let u=Array.from(e.files);for await(let h of u){let v=await h.arrayBuffer();this.files.push({buffer:v,name:"root/"+h.name})}await this.resolveDockerCompose(),t()},e.click()})}}},c=t=>(x("data-v-41c96408"),t=t(),G(),t),Q={class:"w-full"},X={class:"font-thin text-xl lg:text-3xl xl:pl-6 w-full text-center uppercase"},ee={key:0,class:"font-thin block xl:pl-6 w-full text-center uppercase"},te={class:"mb-20 relative overflow-auto w-full"},se={class:"p-4 overflow-auto shadow-sm my-8 bg-slate-100 text-slate-700"},oe={key:0,class:"flex p-4 overflow-auto shadow-sm my-8 bg-slate-100 text-slate-700"},le={class:"w-1/2"},ie={class:"block my-2"},ne={class:"text-right w-1/2"},ae={key:1,class:"flex p-4 overflow-auto shadow-sm my-8 bg-slate-100 text-slate-700"},re={class:"p-4 overflow-auto shadow-sm my-8 bg-slate-100 text-slate-700"},de=c(()=>s("label",{class:"block my-2"}," Upload using drop of Tar / Zip / Folder / Docker Compose File / Docker File ",-1)),ue={class:"p-4 overflow-auto shadow-sm my-8 bg-slate-100 text-slate-700"},pe={class:"block my-2"},ce={class:"p-4 overflow-auto shadow-sm my-8 bg-slate-100 text-slate-700"},he=c(()=>s("label",{class:"block my-2"}," Clone using a git provider ",-1)),me={class:"mr-4 inline-block"},ge=["onClick"],be={key:0},fe={class:"block my-2"},we=["value"],ve={class:"block my-2"},ye=["value"],ke={class:"block my-2"},_e=["value"],Ce=c(()=>s("label",{class:"block my-2"}," Repository ",-1)),Ve=c(()=>s("label",{class:"block my-2"}," Branch ",-1)),Ue=c(()=>s("div",{class:"p-4 overflow-auto shadow-sm my-8 bg-slate-100 text-slate-700"},[s("label",{class:"block my-2"}," One click installation browsing images from docker hub ")],-1)),De={class:"p-4 overflow-auto shadow-sm my-8 bg-slate-100 text-slate-700"},Fe=c(()=>s("label",{class:"block my-2"},"Docker Compose",-1)),Se={class:"p-4 overflow-auto shadow-sm my-8 bg-slate-100 text-slate-700"},$e={key:0,class:"flex mt-2 mb-6"},Ie=c(()=>s("div",{class:"w-1/2"},[s("label",null," Related Services ")],-1)),Ae={class:"text-right w-1/2"},je={class:"flex overflow-auto shadow-sm bg-slate-100 text-slate-700"},Pe=["onClick"],Re={class:"bg-slate-50 p-4 overflow-auto shadow-sm mb-2 text-slate-700"},qe={class:"block my-2"},Be=c(()=>s("b",{class:"block mt-1"}," Service name ",-1)),Ne=c(()=>s("b",{class:"block mt-1"}," Service ID ",-1)),Te=c(()=>s("b",{class:"block mt-1"}," Image ",-1)),Oe={class:"bg-slate-100 p-4 overflow-auto shadow-sm mb-2 text-slate-700"},ze={class:"w-full"},Ee=c(()=>s("caption",{class:"text-left mb-3"}," Environment Variables ",-1)),Le=c(()=>s("thead",null,[s("tr",null,[s("th",{class:"text-left"}," Key "),s("th",{class:"text-left"}," Value "),s("th",{class:"text-left"}," Actions ")])],-1)),We={class:"pr-4"},Me=["onUpdate:modelValue"],He={class:"pr-4"},Ke=["onUpdate:modelValue"],Ze={class:"bg-slate-100 p-4 overflow-auto shadow-sm mb-2 text-slate-700"},Ye={class:"w-full"},xe=c(()=>s("caption",{class:"text-left mb-3"}," Networks ",-1)),Ge=c(()=>s("thead",null,[s("tr",null,[s("th",{class:"text-left"}," Address "),s("th",{class:"text-left"}," Network ID "),s("th",{class:"text-left"}," Actions ")])],-1)),Je={class:"pr-4"},Qe=["onUpdate:modelValue"],Xe={class:"pr-4"},et=["onUpdate:modelValue"],tt={class:"bg-slate-100 p-4 overflow-auto shadow-sm mb-2 text-slate-700"},st={class:"w-full"},ot=c(()=>s("caption",{class:"text-left mb-3"}," Ports ",-1)),lt=c(()=>s("thead",null,[s("tr",null,[s("th",{class:"text-left"}," External "),s("th",{class:"text-left"}," Internal "),s("th",{class:"text-left"}," Actions ")])],-1)),it={class:"pr-4"},nt=["onUpdate:modelValue"],at={class:"pr-4"},rt=["onUpdate:modelValue"],dt={class:"bg-slate-100 p-4 overflow-auto shadow-sm mb-2 text-slate-700"},ut={class:"w-full"},pt=c(()=>s("caption",{class:"text-left mb-3"}," Volumes ",-1)),ct=c(()=>s("thead",null,[s("tr",null,[s("th",{class:"text-left"}," Name "),s("th",{class:"text-left"}," Path "),s("th",{class:"text-left"}," Type "),s("th",{class:"text-left"}," Actions ")])],-1)),ht={class:"pr-4"},mt=["onUpdate:modelValue"],gt={class:"pr-4"},bt=["onUpdate:modelValue"],ft={class:"pr-4"},wt=["onUpdate:modelValue"],vt={style:{width:"130px"}},yt={class:"bg-slate-100 p-4 overflow-auto shadow-sm mb-2 text-slate-700"},kt=c(()=>s("caption",{class:"text-left mb-3"}," Tasks ",-1)),_t={class:"w-full"},Ct=c(()=>s("thead",null,[s("tr",null,[s("th",{class:"text-left"}," Timestamp "),s("th",{class:"text-left"}," State "),s("th",{class:"text-left",style:{height:"26px"}}," Message "),s("th",{class:"whitespace-nowrap text-left",style:{height:"26px"}}," Desired State "),s("th",{class:"text-left",style:{height:"26px"}}," Slot "),s("th",{class:"whitespace-nowrap text-left",style:{height:"26px"}}," Node ID "),s("th",{class:"whitespace-nowrap text-left",style:{height:"26px"}}," Task ID "),s("th",{class:"text-left"}," Actions ")])],-1)),Vt={class:"pr-4"},Ut=["onUpdate:modelValue"],Dt={class:"pr-4"},Ft=["onUpdate:modelValue"],St={class:"pr-4"},$t=["onUpdate:modelValue"],It={class:"pr-4"},At=["onUpdate:modelValue"],jt={class:"pr-4"},Pt=["onUpdate:modelValue"],Rt={class:"pr-4"},qt=["onUpdate:modelValue"],Bt={class:"pr-4"},Nt=["onUpdate:modelValue"],Tt={style:{width:"130px"}},Ot={class:"bg-slate-100 p-4 overflow-auto shadow-sm mb-2 text-slate-700"},zt=c(()=>s("caption",{class:"text-left mb-3"}," Containers ",-1)),Et={class:"w-full"},Lt=c(()=>s("thead",null,[s("tr",null,[s("th",{class:"text-left"}," Name "),s("th",{class:"text-left"}," Command "),s("th",{class:"text-left",style:{height:"26px"}}," State "),s("th",{class:"text-left",style:{height:"26px"}}," Status "),s("th",{class:"text-left",style:{height:"26px"}}," Image "),s("th",{class:"whitespace-nowrap text-left",style:{height:"26px"}}," Task ID "),s("th",{class:"whitespace-nowrap text-left"}," Node ID "),s("th",{class:"whitespace-nowrap text-left"}," Container ID "),s("th",{class:"text-left"}," Actions ")])],-1)),Wt={class:"pr-4"},Mt=["onUpdate:modelValue"],Ht={class:"pr-4"},Kt=["onUpdate:modelValue"],Zt={class:"pr-4"},Yt=["onUpdate:modelValue"],xt={class:"pr-4"},Gt=["onUpdate:modelValue"],Jt={class:"pr-4"},Qt=["onUpdate:modelValue"],Xt={class:"pr-4"},es=["onUpdate:modelValue"],ts={class:"pr-4"},ss=["onUpdate:modelValue"],os={class:"pr-4"},ls=["onUpdate:modelValue"],is={style:{width:"130px"}},ns={key:2,class:"text-right"},as=["disabled"],rs={key:3,class:"flex p-4 overflow-auto shadow-sm my-8 bg-slate-100 text-slate-700"};function ds(t,e,u,h,v,r){const N=k("SectionHero"),T=k("WrapperPage"),O=k("TemplateDefault");return n(),Z(O,{renderer:u.renderer},{default:y(()=>[B(N,null,{default:y(()=>[s("div",Q,[s("h1",X,g(r.id||"Deploy Docker App"),1),t.loading?(n(),a("h2",ee," Loading - "+g(t.loading)+" ... ",1)):b("",!0)])]),_:1}),B(T,{class:"p-6"},{default:y(()=>{var C,V,U,D,F,S,$,I,A,j,P,R,q;return[s("div",te,[s("div",se,[d(s("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>t.name=o),placeholder:"Name",class:"text-2xl px-4 py-2 block w-full mb-4"},null,512),[[p,t.name]]),t.log?b("",!0):d((n(),a("input",{key:0,"onUpdate:modelValue":e[1]||(e[1]=o=>t.slug=o),placeholder:"Slug",class:"px-4 py-2 block w-full"},null,512)),[[p,t.slug]]),m(),t.log?d((n(),a("input",{key:1,"onUpdate:modelValue":e[2]||(e[2]=o=>r.id=o),placeholder:"Slug",readonly:"",class:"px-4 py-2 block w-full"},null,512)),[[p,r.id]]):b("",!0)]),t.log?(n(),a("div",oe,[s("div",le,[s("label",ie," Last updated "+g(new Date(((D=(U=(V=(C=t.log)==null?void 0:C[0])==null?void 0:V.commit)==null?void 0:U.author)==null?void 0:D.timestamp)*1e3).toLocaleString())+" by "+g((I=($=(S=(F=t.log)==null?void 0:F[0])==null?void 0:S.commit)==null?void 0:$.author)==null?void 0:I.name),1)]),s("div",ne,[s("button",{class:"p-2 mr-4 rounded bg-slate-200",onClick:e[3]||(e[3]=o=>r.update())}," Update "),s("button",{class:"p-2 rounded bg-slate-200",onClick:e[4]||(e[4]=o=>r.getItem())}," Reload ")])])):b("",!0),t.log?(n(),a("div",ae,[t.running?b("",!0):(n(),a("button",{key:0,class:"p-2 mr-4 rounded bg-slate-200",onClick:e[5]||(e[5]=o=>r.start())}," Start ")),t.running?(n(),a("button",{key:1,class:"p-2 mr-4 rounded bg-slate-200",onClick:e[6]||(e[6]=o=>r.stop())}," Stop ")):b("",!0),m(),s("button",{class:"p-2 mr-4 rounded bg-slate-200",onClick:e[7]||(e[7]=o=>r.compose())}," Compose "),s("button",{class:"p-2 mr-4 rounded bg-slate-200",onClick:e[8]||(e[8]=o=>r.build())}," Build "),s("button",{class:"p-2 mr-4 rounded bg-slate-200",onClick:e[9]||(e[9]=o=>r.destroy())}," Destroy "),!t.webhook&&t.repository?(n(),a("button",{key:2,class:"p-2 mr-4 rounded bg-slate-200",onClick:e[10]||(e[10]=o=>r.attach())}," Attach webhook ")):b("",!0),t.webhook&&t.repository?(n(),a("button",{key:3,class:"p-2 mr-4 rounded bg-slate-200",onClick:e[11]||(e[11]=o=>r.detach())}," Detach webhook ")):b("",!0),s("button",{class:"p-2 mr-4 rounded bg-slate-200",onClick:e[12]||(e[12]=o=>r.remove())}," Remove ")])):b("",!0),s("div",re,[de,s("button",{class:"rounded p-2 bg-slate-200 block w-full mt-2",onClick:e[13]||(e[13]=o=>r.uploadFiles())}," Upload files "),s("button",{class:"rounded p-2 bg-slate-200 block w-full mt-2",onClick:e[14]||(e[14]=o=>t.uploadFolde())}," Upload folder "),s("button",{class:"rounded p-2 bg-slate-200 block w-full mt-2",onClick:e[15]||(e[15]=o=>r.uploadTar())}," Upload tar "),s("button",{class:"rounded p-2 bg-slate-200 block w-full mt-2",onClick:e[16]||(e[16]=o=>r.uploadZip())}," Upload zip ")]),s("div",ue,[s("label",pe," Files count: "+g(t.files.length),1)]),s("div",ce,[he,(n(!0),a(w,null,f(r.oauthProvidersFiltered,o=>(n(),a("div",me,[s("button",{class:"rounded p-2 bg-slate-200 mr-1",onClick:i=>r.consent(o.consent_url)}," Connect to "+g(o.provider),9,ge),m(),s("button",{class:"rounded p-2 bg-slate-200",onClick:e[17]||(e[17]=i=>t.searchRepos=!t.searchRepos)},g(t.searchRepos?"Close":"Select repository"),1)]))),256)),t.searchRepos?(n(),a("div",be,[s("label",fe," Select user / organisation ("+g(((A=r.orgs)==null?void 0:A.length)||"0")+") ",1),m(),d(s("select",{"onUpdate:modelValue":e[18]||(e[18]=o=>t.query=o),class:"mt-2 px-4 py-2 w-full"},[(n(!0),a(w,null,f(r.orgs,o=>(n(),a("option",{value:o.query},g(o.title),9,we))),256))],512),[[_,t.query]]),m(),d(s("input",{"onUpdate:modelValue":e[19]||(e[19]=o=>t.search=o),placeholder:"Search for repository ...",class:"mt-2 px-4 py-2 w-full",onKeypress:e[20]||(e[20]=Y(o=>r.getRepositories(),["enter"]))},null,544),[[p,t.search]]),m(),s("button",{class:"rounded p-2 mt-2 w-full bg-slate-200",onClick:e[21]||(e[21]=o=>r.getRepositories())}," Search "),m(),s("label",ve," Select Repository ("+g(((P=(j=t.repositories)==null?void 0:j.items)==null?void 0:P.length)||"0")+") ",1),m(),d(s("select",{"onUpdate:modelValue":e[22]||(e[22]=o=>t.repository=o),class:"mt-2 px-4 py-2 w-full"},[(n(!0),a(w,null,f((R=t.repositories)==null?void 0:R.items,o=>(n(),a("option",{value:o.clone_url},g(o.full_name),9,ye))),256))],512),[[_,t.repository]]),m(),s("label",ke," Select Branch ("+g(((q=t.branches)==null?void 0:q.length)||"0")+") ",1),m(),d(s("select",{"onUpdate:modelValue":e[23]||(e[23]=o=>t.branch=o),class:"mt-2 px-4 py-2 w-full"},[(n(!0),a(w,null,f(t.branches,o=>(n(),a("option",{value:o.name},g(o.name),9,_e))),256))],512),[[_,t.branch]])])):b("",!0),m(),Ce,m(),d(s("input",{"onUpdate:modelValue":e[24]||(e[24]=o=>t.repository=o),placeholder:"Repository url",class:"mt-2 px-4 py-2 w-full"},null,512),[[p,t.repository]]),m(),Ve,m(),d(s("input",{"onUpdate:modelValue":e[25]||(e[25]=o=>t.branch=o),placeholder:"Branch",class:"mt-2 px-4 py-2 w-full"},null,512),[[p,t.branch]]),m(),s("button",{class:"rounded p-2 bg-slate-200 mt-2",onClick:e[26]||(e[26]=o=>t.adjustVolumes=!t.adjustVolumes)}," Move volumes to app folder: "+g(t.adjustVolumes?"Yes":"No"),1)]),Ue,s("div",De,[Fe,s("button",{class:"rounded p-2 bg-slate-200 my-4",onClick:e[27]||(e[27]=o=>t.inherit=!t.inherit)}," Inherit original docker-compose file: "+g(t.inherit?"Yes":"No"),1),m(),d(s("textarea",{class:"w-full p-4","onUpdate:modelValue":e[28]||(e[28]=o=>t.dockerComposeFile=o),rows:"10",placeholder:"docker-compose.override.yml"},null,512),[[p,t.dockerComposeFile]])]),s("div",Se,[t.log?(n(),a("div",$e,[Ie,s("div",Ae,[s("button",{class:"rounded p-2 bg-slate-200",onClick:e[29]||(e[29]=o=>r.getServices())}," Reload ")])])):b("",!0),s("div",je,[(n(!0),a(w,null,f(t.services,o=>(n(),a("button",{class:"p-2 mr-1 rounded bg-slate-200",onClick:i=>{var l;return t.serviceOpen=((l=t.serviceOpen)==null?void 0:l.docker_service_id)===o.docker_service_id?null:o}},g(o.name.replace(t.slug+"_","")),9,Pe))),256))]),(n(!0),a(w,null,f(t.serviceOpen?[t.serviceOpen]:[],o=>(n(),a("div",Re,[s("label",qe,[Be,m(" "+g(o.name)+" ",1),Ne,m(" "+g(o.docker_service_id)+" ",1),Te,m(" "+g(o.docker_image),1)]),s("div",Oe,[s("table",ze,[Ee,Le,s("tbody",null,[(n(!0),a(w,null,f(o.environments,i=>(n(),a("tr",null,[s("td",We,[d(s("input",{"onUpdate:modelValue":l=>i.key=l,class:"w-full p-2 rounded"},null,8,Me),[[p,i.key]])]),s("td",He,[d(s("input",{"onUpdate:modelValue":l=>i.value=l,class:"w-full p-2 rounded"},null,8,Ke),[[p,i.value]])]),s("td",null,[s("button",{class:"mr-2 rounded p-2 bg-slate-200 my-4",onClick:e[30]||(e[30]=l=>t.inherit=!t.inherit)}," Save "),s("button",{class:"rounded p-2 bg-slate-200 my-4",onClick:e[31]||(e[31]=l=>t.inherit=!t.inherit)}," Delete ")])]))),256))])]),s("button",{class:"mr-2 rounded p-2 bg-slate-200 my-4",onClick:e[32]||(e[32]=i=>t.inherit=!t.inherit)}," New ")]),s("div",Ze,[s("table",Ye,[xe,Ge,s("tbody",null,[(n(!0),a(w,null,f(o.networks,i=>(n(),a("tr",null,[s("td",Je,[d(s("input",{"onUpdate:modelValue":l=>i.address=l,class:"w-full p-2 rounded"},null,8,Qe),[[p,i.address]])]),s("td",Xe,[d(s("input",{"onUpdate:modelValue":l=>i.docker_network_id=l,class:"w-full p-2 rounded"},null,8,et),[[p,i.docker_network_id]])]),s("td",null,[s("button",{class:"mr-2 rounded p-2 bg-slate-200 my-4",onClick:e[33]||(e[33]=l=>t.inherit=!t.inherit)}," Save "),s("button",{class:"rounded p-2 bg-slate-200 my-4",onClick:e[34]||(e[34]=l=>t.inherit=!t.inherit)}," Delete ")])]))),256))])]),s("button",{class:"mr-2 rounded p-2 bg-slate-200 my-4",onClick:e[35]||(e[35]=i=>t.inherit=!t.inherit)}," New ")]),s("div",tt,[s("table",st,[ot,lt,s("tbody",null,[(n(!0),a(w,null,f(o.ports,i=>(n(),a("tr",null,[s("td",it,[d(s("input",{"onUpdate:modelValue":l=>i.port_external=l,class:"w-full p-2 rounded"},null,8,nt),[[p,i.port_external]])]),s("td",at,[d(s("input",{"onUpdate:modelValue":l=>i.port_internal=l,class:"w-full p-2 rounded"},null,8,rt),[[p,i.port_internal]])]),s("td",null,[s("button",{class:"mr-2 rounded p-2 bg-slate-200 my-4",onClick:e[36]||(e[36]=l=>t.inherit=!t.inherit)}," Open "),s("button",{class:"mr-2 rounded p-2 bg-slate-200 my-4",onClick:e[37]||(e[37]=l=>t.inherit=!t.inherit)}," Close "),s("button",{class:"mr-2 rounded p-2 bg-slate-200 my-4",onClick:e[38]||(e[38]=l=>t.inherit=!t.inherit)}," Save "),s("button",{class:"rounded p-2 bg-slate-200 my-4",onClick:e[39]||(e[39]=l=>t.inherit=!t.inherit)}," Delete ")])]))),256))])]),s("button",{class:"mr-2 rounded p-2 bg-slate-200 my-4",onClick:e[40]||(e[40]=i=>t.inherit=!t.inherit)}," New ")]),s("div",dt,[s("table",ut,[pt,ct,s("tbody",null,[(n(!0),a(w,null,f(o.volumes,i=>(n(),a("tr",null,[s("td",ht,[d(s("input",{"onUpdate:modelValue":l=>i.name=l,class:"w-full p-2 rounded"},null,8,mt),[[p,i.name]])]),s("td",gt,[d(s("input",{"onUpdate:modelValue":l=>i.path=l,class:"w-full p-2 rounded"},null,8,bt),[[p,i.path]])]),s("td",ft,[d(s("input",{"onUpdate:modelValue":l=>i.type=l,class:"w-full p-2 rounded"},null,8,wt),[[p,i.type]])]),s("td",vt,[s("button",{class:"mr-2 rounded p-2 bg-slate-200 my-4",onClick:e[41]||(e[41]=l=>t.inherit=!t.inherit)}," Save "),s("button",{class:"rounded p-2 bg-slate-200 my-4",onClick:e[42]||(e[42]=l=>t.inherit=!t.inherit)}," Delete ")])]))),256))])]),s("button",{class:"mr-2 rounded p-2 bg-slate-200 my-4",onClick:e[43]||(e[43]=i=>t.inherit=!t.inherit)}," New ")]),s("div",yt,[kt,s("table",_t,[Ct,s("tbody",null,[(n(!0),a(w,null,f(o.tasks,i=>(n(),a("tr",null,[s("td",Vt,[d(s("input",{"onUpdate:modelValue":l=>i.timestamp=l,class:"w-full p-2 rounded"},null,8,Ut),[[p,i.timestamp]])]),s("td",Dt,[d(s("input",{"onUpdate:modelValue":l=>i.state=l,class:"w-full p-2 rounded"},null,8,Ft),[[p,i.state]])]),s("td",St,[d(s("input",{"onUpdate:modelValue":l=>i.message=l,class:"w-full p-2 rounded"},null,8,$t),[[p,i.message]])]),s("td",It,[d(s("input",{"onUpdate:modelValue":l=>i.desired_state=l,class:"w-full p-2 rounded"},null,8,At),[[p,i.desired_state]])]),s("td",jt,[d(s("input",{"onUpdate:modelValue":l=>i.slot=l,class:"w-full p-2 rounded"},null,8,Pt),[[p,i.slot]])]),s("td",Rt,[d(s("input",{"onUpdate:modelValue":l=>i.docker_node_id=l,class:"w-full p-2 rounded"},null,8,qt),[[p,i.docker_node_id]])]),s("td",Bt,[d(s("input",{"onUpdate:modelValue":l=>i.docker_task_id=l,class:"w-full p-2 rounded"},null,8,Nt),[[p,i.docker_task_id]])]),s("td",Tt,[s("button",{class:"mr-2 rounded p-2 bg-slate-200 my-4",onClick:e[44]||(e[44]=l=>t.inherit=!t.inherit)}," Save "),s("button",{class:"rounded p-2 bg-slate-200 my-4",onClick:e[45]||(e[45]=l=>t.inherit=!t.inherit)}," Delete ")])]))),256))])]),s("button",{class:"mr-2 rounded p-2 bg-slate-200 my-4",onClick:e[46]||(e[46]=i=>t.inherit=!t.inherit)}," New ")]),s("div",Ot,[zt,s("table",Et,[Lt,s("tbody",null,[(n(!0),a(w,null,f(o.containers,i=>(n(),a("tr",null,[s("td",Wt,[d(s("input",{"onUpdate:modelValue":l=>i.name=l,class:"w-full p-2 rounded"},null,8,Mt),[[p,i.name]])]),s("td",Ht,[d(s("input",{"onUpdate:modelValue":l=>i.command=l,class:"w-full p-2 rounded"},null,8,Kt),[[p,i.command]])]),s("td",Zt,[d(s("input",{"onUpdate:modelValue":l=>i.state=l,class:"w-full p-2 rounded"},null,8,Yt),[[p,i.state]])]),s("td",xt,[d(s("input",{"onUpdate:modelValue":l=>i.status=l,class:"w-full p-2 rounded"},null,8,Gt),[[p,i.status]])]),s("td",Jt,[d(s("input",{"onUpdate:modelValue":l=>i.docker_image_name=l,class:"w-full p-2 rounded"},null,8,Qt),[[p,i.docker_image_name]])]),s("td",Xt,[d(s("input",{"onUpdate:modelValue":l=>i.docker_task_id=l,class:"w-full p-2 rounded"},null,8,es),[[p,i.docker_task_id]])]),s("td",ts,[d(s("input",{"onUpdate:modelValue":l=>i.docker_node_id=l,class:"w-full p-2 rounded"},null,8,ss),[[p,i.docker_node_id]])]),s("td",os,[d(s("input",{"onUpdate:modelValue":l=>i.docker_container_id=l,class:"w-full p-2 rounded"},null,8,ls),[[p,i.docker_container_id]])]),s("td",is,[s("button",{class:"mr-2 rounded p-2 bg-slate-200 my-4",onClick:e[47]||(e[47]=l=>t.inherit=!t.inherit)}," Save "),s("button",{class:"rounded p-2 bg-slate-200 my-4",onClick:e[48]||(e[48]=l=>t.inherit=!t.inherit)}," Delete ")])]))),256))])]),s("button",{class:"mr-2 rounded p-2 bg-slate-200 my-4",onClick:e[49]||(e[49]=i=>t.inherit=!t.inherit)}," New ")])]))),256))]),t.log?b("",!0):(n(),a("div",ns,[s("button",{class:"py-4 w-full rounded bg-slate-200",disabled:!t.slug,onClick:e[50]||(e[50]=o=>r.deploy())}," Launch ",8,as)])),t.log?(n(),a("div",rs,[t.running?b("",!0):(n(),a("button",{key:0,class:"p-2 mr-4 rounded bg-slate-200",onClick:e[51]||(e[51]=o=>r.start())}," Start ")),t.running?(n(),a("button",{key:1,class:"p-2 mr-4 rounded bg-slate-200",onClick:e[52]||(e[52]=o=>r.stop())}," Stop ")):b("",!0),m(),s("button",{class:"p-2 mr-4 rounded bg-slate-200",onClick:e[53]||(e[53]=o=>r.compose())}," Compose "),s("button",{class:"p-2 mr-4 rounded bg-slate-200",onClick:e[54]||(e[54]=o=>r.build())}," Build "),s("button",{class:"p-2 mr-4 rounded bg-slate-200",onClick:e[55]||(e[55]=o=>r.destroy())}," Destroy "),!t.webhook&&t.repository?(n(),a("button",{key:2,class:"p-2 mr-4 rounded bg-slate-200",onClick:e[56]||(e[56]=o=>r.attach())}," Attach webhook ")):b("",!0),t.webhook&&t.repository?(n(),a("button",{key:3,class:"p-2 mr-4 rounded bg-slate-200",onClick:e[57]||(e[57]=o=>r.detach())}," Detach webhook ")):b("",!0),s("button",{class:"p-2 mr-4 rounded bg-slate-200",onClick:e[58]||(e[58]=o=>r.update())}," Update "),s("button",{class:"p-2 mr-4 rounded bg-slate-200",onClick:e[59]||(e[59]=o=>r.remove())}," Remove "),s("button",{class:"p-2 rounded bg-slate-200",onClick:e[60]||(e[60]=o=>r.getItem())}," Reload ")])):b("",!0)])]}),_:1})]),_:1},8,["renderer"])}const gs=K(J,[["render",ds],["__scopeId","data-v-41c96408"]]);export{gs as default};
