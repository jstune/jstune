import{W as x}from"./UtilityNavbar-SYv8Mupz.js";import b from"./TemplateDefault-C1m_2Kol.js";import{S as v}from"./SectionHero-DfQv4RyM.js";import{_ as w,c as g,w as r,r as n,o as y,a as d,b as s,t as u,e as c,v as m,j as _}from"./index-Cb03R7j9.js";const T={components:{WrapperPage:x,TemplateDefault:b,SectionHero:v},inject:["io"],props:["renderer"],data:()=>({command:"",address:"",output:"",autoscroll:!0}),async created(){try{await this.inspectLeader()}catch{}console.log("Listening to terminal events"),this.io.service("terminal").on("output",e=>{this.output+=`${e}
`,this.autoscroll&&(this.$refs.output.scrollTop=this.$refs.output.scrollHeight)})},methods:{async inspectLeader(){var t;const e=await this.io.service("state").get();if(e.leaderIP)this.address=e.leaderIP;else{const l=await this.io.service("docker_nodes").find({query:{leader:!0}}),a=(t=l==null?void 0:l.data)==null?void 0:t[0];a&&(this.address=a.address)}},async submit(){try{const e=await this.io.service("exec").patch({command:this.command});console.log("result",e),this.command=""}catch(e){alert(e.message)}}}},$=s("h1",{class:"font-thin text-xl lg:text-3xl xl:pl-6 w-full text-center"}," Terminal ",-1),k={class:"flex-col max-w-md place-self-center mt-8 mb-24 w-full flex md:max-w-4xl"},D=s("h1",{class:"px-4 mb-2 mt-6 font-medium text-3xl w-full"}," Execute scripts on leader node ",-1),P={class:"px-4 mb-4 mt-2 font-medium text-xl w-full"},S={class:"mt-6 relative mb-16 flex-col md:flex-row flex w-full"},C=s("div",{class:"-mb-6 bg-slate-100 -bottom-5 absolute h-0.5 left-2 right-2"},null,-1);function H(e,t,l,a,L,i){const p=n("SectionHero"),f=n("WrapperPage"),h=n("TemplateDefault");return y(),g(h,{renderer:l.renderer},{default:r(()=>[d(p,null,{default:r(()=>[$]),_:1}),d(f,{class:"flex-col"},{default:r(()=>[s("div",k,[D,s("h1",P," Leader node address: "+u(e.address),1),s("div",S,[c(s("textarea",{ref:"output",readonly:"","onUpdate:modelValue":t[0]||(t[0]=o=>e.output=o),class:"justify-start flex-col-reverse flex overflow-auto h-64 w-full p-4 rounded bg-slate-50"},null,512),[[m,e.output]]),C]),c(s("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>e.command=o),onKeypress:t[2]||(t[2]=_(o=>i.submit(),["enter"])),class:"p-4 my-4 bg-slate-50 rounded"},null,544),[[m,e.command]]),s("button",{class:"p-4 rounded bg-slate-200",onClick:t[3]||(t[3]=o=>i.submit())}," Go "),s("button",{class:"p-4 rounded bg-slate-200 my-4",onClick:t[4]||(t[4]=o=>e.autoscroll=!e.autoscroll)}," Autoscroll "+u(e.autoscroll?"on":"off"),1)])]),_:1})]),_:1},8,["renderer"])}const I=w(T,[["render",H]]);export{I as default};
