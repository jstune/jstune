import{T as u}from"./TemplateSetup-CoPN2DOm.js";import{_ as c,c as f,w as g,r as m,o as h,d as n,e as a,v as i,b as o,f as w,t as b}from"./index-Bn34Xj8m.js";import"./UtilityNavbar-DetELRmx.js";import"./TemplateDefault-C8buaoFH.js";const v={inject:["io"],components:{TemplateSetup:u},data:()=>({config:{token:"",ip:"",port:"",role:"worker"},loading:!1}),async created(){await this.connect()},methods:{async connect(){this.loading=!0;const e=await this.io.service("setup").get("swarm");this.resolve(e)},async setup(e=!1){this.loading=!0;let t=await this.io.service("setup").update("swarm",{...this.config,create:e});this.resolve(t)},async resolve(e){e&&!e.ready?(this.config=e.config,this.config.role||(this.config.role="worker")):this.$router.push("/login"),this.loading=!1},getIp(){const e=location.hostname,t=/^(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/,l=/^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$/;(t.test(e)||l.test(e))&&(this.ip=e)}}},k=o("h2",{class:"mb-2"}," Connect to swarm ",-1),y=o("option",{value:"worker"},"Worker",-1),x=o("option",{value:"manager"},"Manager",-1),S=[y,x],T=["disabled"],C=["disabled"],$={class:"mt-2"};function I(e,t,l,d,V,r){const p=m("TemplateSetup");return h(),f(p,null,{default:g(()=>[k,n(),a(o("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>e.config.ip=s),class:"mb-3 font-extralight text-slate-800 py-2.5 px-2 rounded-md w-full",placeholder:"IP:"},null,512),[[i,e.config.ip]]),n(),a(o("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>e.config.port=s),class:"mb-3 font-extralight text-slate-800 py-2.5 px-2 rounded-md w-full",placeholder:"Port:"},null,512),[[i,e.config.port]]),a(o("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>e.config.token=s),class:"mb-3 font-extralight text-slate-800 py-2.5 px-2 rounded-md w-full",placeholder:"Token:"},null,512),[[i,e.config.token]]),n(),a(o("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>e.config.role=s),class:"mb-3 font-extralight text-slate-800 py-2.5 px-2 rounded-md w-full"},S,512),[[w,e.config.role]]),n(),o("button",{onClick:t[4]||(t[4]=s=>r.setup()),disabled:e.loading,class:"hover:bg-fuchsia-950 mt-2 rounded-lg bg-fuchsia-900 w-full p-3",title:"Install using already running database instance"}," Connect to existing swarm ",8,T),n(),o("button",{onClick:t[5]||(t[5]=s=>r.setup(!0)),disabled:e.loading,class:"hover:bg-fuchsia-950 mt-4 rounded-lg bg-fuchsia-900 w-full p-3",title:"Install using already running database instance"}," Create a new swarm ",8,C),o("h2",$," Loading: "+b(e.loading),1)]),_:1})}const A=c(v,[["render",I]]);export{A as default};
