import{W as C}from"./UtilityNavbar-CsBq60lN.js";import y from"./TemplateSidemenu-sBZ3DC34.js";import{_ as $,c as I,w as S,r as j,o as n,b as s,e as B,v as D,j as T,t as r,g as a,h as x,F as _}from"./index-Cvx_1RfR.js";import"./SectionHero-D5vWQ28e.js";const A={components:{WrapperPage:C,TemplateSidemenu:y},inject:["menus","io"],props:["renderer"],data:()=>({service:"docker_services_ports",items:null,current:null,search:"",portProviders:["ufw","google","aws","azure"]}),async created(){await this.getItems()},methods:{async inspectPort(e="ufw"){const t=prompt("Port to inspect"),l=await this.io.service("ports").get({port:t,provider:e});console.log(l)},async openPort(e="ufw"){const t=prompt("Port to inspect"),l=await this.io.service("ports").create({port:t,provider:e});console.log(l)},async closePort(e="ufw"){const t=prompt("Port to inspect"),l=await this.io.service("ports").remove({port:t,provider:e});console.log(l)},async getItems(){var e;try{const t={};this.items&&(t.$limit=(e=this.items)==null?void 0:e.limit),this.search&&(t.$or=[{port_external:{$like:`%${this.search}%`}},{port_internal:{$like:`%${this.search}%`}},{docker_service_id:{$like:`%${this.search}%`}}]),this.items=await this.io.service(this.service).find({query:t})}catch(t){this.items=null,console.error(t)}},next(){this.items&&(this.items.skip+=this.items.limit)},previous(){this.items&&(this.items.skip-=this.items.limit)}}},N={class:"flex h-full flex-col md:flex-row"},F={class:"flex-col flex w-full md:w-1/2 flex-shrink-0"},K=s("h2",{class:"font-light text-lg p-4 max-w-full"}," App Ports ",-1),V={class:"flex px-4"},W={class:"px-4 pt-4 md:hidden flex"},q={class:"text-sm justify-items-center content-center text-center grow"},z={class:"px-4 pt-4 grow"},E=["onClick"],L={class:"p-4 hidden md:flex"},M={class:"text-sm justify-items-center content-center text-center grow"},O={class:"grow p-4 overflow-auto"},U=s("h2",{class:"font-light text-lg max-w-full"}," Details & Actions ",-1),G={class:"mb-2 p-2 bg-slate-50"},H=["onClick"],J=["onClick"],Q=["onClick"];function R(e,t,l,X,Y,i){const P=j("TemplateSidemenu");return n(),I(P,{title:"Applications",renderer:l.renderer},{default:S(()=>{var d,m,p,h,u,g,f,v,b,k,w;return[s("div",N,[s("div",F,[K,s("div",V,[B(s("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>e.search=o),placeholder:"Search",onKeypress:t[1]||(t[1]=T((...o)=>i.getItems&&i.getItems(...o),["enter"])),class:"rounded-l bg-slate-50 grow p-2"},null,544),[[D,e.search]]),s("button",{onClick:t[2]||(t[2]=(...o)=>i.getItems&&i.getItems(...o)),class:"hover:bg-slate-200 font-extralight rounded-r p-2 bg-slate-100"}," Search ")]),s("div",W,[s("button",{class:"p-1.5 w-20 hover:bg-slate-200 font-extralight rounded bg-slate-100",disabled:"!items?.skip",onClick:t[3]||(t[3]=o=>i.previous())}," Previous "),s("div",q,r(((d=e.items)==null?void 0:d.skip)+1)+" - "+r(((m=e.items)==null?void 0:m.skip)+((h=(p=e.items)==null?void 0:p.data)==null?void 0:h.length))+" of "+r((u=e.items)==null?void 0:u.total),1),s("button",{class:"p-1.5 w-20 hover:bg-slate-200 font-extralight rounded bg-slate-100",disabled:"!items || (items?.skip + items?.data?.length) >= items?.data?.length",onClick:t[4]||(t[4]=o=>i.next())}," Next ")]),s("div",z,[(n(!0),a(_,null,x((g=e.items)==null?void 0:g.data,o=>(n(),a("button",{onClick:c=>e.current=o,class:"rounded hover:bg-slate-200 font-extralight mb-1 text-left w-full bg-slate-50 py-1 px-2"},r(o.port_external)+":"+r(o.port_internal),9,E))),256))]),s("div",L,[s("button",{class:"p-1.5 w-20 hover:bg-slate-200 font-extralight rounded bg-slate-100",disabled:"!items?.skip",onClick:t[5]||(t[5]=o=>i.previous())}," Previous "),s("div",M,r(((f=e.items)==null?void 0:f.skip)+1)+" - "+r(((v=e.items)==null?void 0:v.skip)+((k=(b=e.items)==null?void 0:b.data)==null?void 0:k.length))+" of "+r((w=e.items)==null?void 0:w.total),1),s("button",{class:"p-1.5 w-20 hover:bg-slate-200 font-extralight rounded bg-slate-100",disabled:"!items || (items?.skip + items?.data?.length) >= items?.data?.length",onClick:t[6]||(t[6]=o=>i.next())}," Next ")])]),s("div",O,[U,s("pre",null,"				"+r(e.current)+`
				`,1),(n(!0),a(_,null,x(e.portProviders,o=>(n(),a("div",G,[s("h3",null,r(o),1),s("button",{onClick:c=>i.inspectPort(o),class:"mb-2 mr-2 hover:bg-slate-200 font-extralight rounded-r p-2 bg-slate-100"}," Inspect Port ",8,H),s("button",{onClick:c=>i.openPort(o),class:"hover:bg-slate-200 font-extralight rounded-r p-2 bg-slate-100"}," Open Port ",8,J),s("button",{onClick:c=>i.closePort(o),class:"hover:bg-slate-200 font-extralight rounded-r p-2 bg-slate-100"}," Close Port ",8,Q)]))),256))])])]}),_:1},8,["renderer"])}const ot=$(A,[["render",R]]);export{ot as default};
