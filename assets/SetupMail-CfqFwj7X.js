import{T as p}from"./TemplateSetup-Ci83aCSN.js";import{_ as u,c as m,w as c,r as g,o as h,d as o,e as a,v as n,b as s,i,t as f}from"./index-B6VvqPtm.js";import"./UtilityNavbar-BRnB1oGg.js";import"./TemplateDefault-BBn5c21o.js";const b={inject:["io"],components:{TemplateSetup:p},data:()=>({config:{user:"",pass:"",host:"smtp.gmail.com",port:465,secure:!0,pool:!1,rejectUnauthorized:!0},receiver:"",loading:!1}),async created(){await this.connect()},methods:{async connect(){this.loading=!0;const e=await this.io.service("setup").get("mail");this.resolve(e)},async setup(e=!1){this.loading=!0;let t=await this.io.service("setup").update("mail",{test:e,receiver:this.receiver,...this.config});e?(alert("Test email sent"),this.loading=!1):this.resolve(t)},async resolve(e){e&&!e.ready||this.$router.push("/login"),this.loading=!1}}},y=s("h2",{class:"mb-2"}," Setup sender email ",-1),v=s("a",{class:"hover:no-underline hover:text-sky-100 underline inline-block mb-2",style:{height:"24px"},target:"_blank",href:"https://security.google.com/settings/security/apppasswords"}," Get gmail app password (optional) ",-1),x=s("label",{class:"block"},"Secure",-1),w=s("label",{class:"block"},"Pool",-1),k=s("label",{class:"block"},"Reject unauthorized",-1),S=s("h2",{class:"mt-10 mb-2",style:{height:"24px"}}," Send a test email ",-1),U=["disabled"],V=s("h2",{class:"mt-10",style:{height:"24px"}}," Store sender ",-1),T=["disabled"],j={class:"mt-2"};function C(e,t,$,z,B,r){const d=g("TemplateSetup");return h(),m(d,null,{default:c(()=>[y,o(),a(s("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>e.config.user=l),class:"mb-3 font-extralight text-slate-800 py-2.5 px-2 rounded-md w-full",placeholder:"Email:",name:"email"},null,512),[[n,e.config.user]]),v,a(s("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>e.config.pass=l),class:"mb-3 font-extralight text-slate-800 py-2.5 px-2 rounded-md w-full",placeholder:"Password:",type:"password",name:"password"},null,512),[[n,e.config.pass]]),a(s("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>e.config.host=l),class:"mb-3 font-extralight text-slate-800 py-2.5 px-2 rounded-md w-full",placeholder:"Host: smtp.gmail.com",name:"host"},null,512),[[n,e.config.host]]),o(),a(s("input",{"onUpdate:modelValue":t[3]||(t[3]=l=>e.config.port=l),class:"mb-3 font-extralight text-slate-800 py-2.5 px-2 rounded-md w-full",placeholder:"Port: 465",type:"number",name:"port"},null,512),[[n,e.config.port]]),o(),x,o(),a(s("input",{name:"secure",type:"checkbox","onUpdate:modelValue":t[4]||(t[4]=l=>e.config.secure=l),class:"mb-3 font-extralight text-slate-800 py-2.5 px-2 rounded-md"},null,512),[[i,e.config.secure]]),o(),w,o(),a(s("input",{name:"pool",type:"checkbox","onUpdate:modelValue":t[5]||(t[5]=l=>e.config.pool=l),class:"mb-3 font-extralight text-slate-800 py-2.5 px-2 rounded-md"},null,512),[[i,e.config.pool]]),o(),k,o(),a(s("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=l=>e.config.rejectUnauthorized=l),class:"mb-3 font-extralight text-slate-800 py-2.5 px-2 rounded-md"},null,512),[[i,e.config.rejectUnauthorized]]),S,a(s("input",{name:"receiver-email","onUpdate:modelValue":t[7]||(t[7]=l=>e.receiver=l),class:"mb-3 font-extralight text-slate-800 py-2.5 px-2 rounded-md w-full",placeholder:"Receiver: example@gmail.com"},null,512),[[n,e.receiver]]),s("button",{onClick:t[8]||(t[8]=l=>r.setup(!0)),disabled:e.loading,class:"hover:bg-fuchsia-950 mt-4 rounded-lg bg-fuchsia-900 w-full p-3",title:"Install using already running database instance"}," Send test email ",8,U),V,s("button",{onClick:t[9]||(t[9]=l=>r.setup()),disabled:e.loading,class:"hover:bg-fuchsia-950 mt-4 rounded-lg bg-fuchsia-900 w-full p-3",title:"Install using already running database instance"}," Submit ",8,T),s("h2",j," Loading: "+f(e.loading),1)]),_:1})}const N=u(b,[["render",C]]);export{N as default};
